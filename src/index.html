<!doctype html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Panel de Recorridos</title>
    </head>
    <body>
        <h1>Panel de Recorridos</h1>

        <button id="add-route-btn">Agregar Recorrido</button>
        <div id="routes-list"></div>

        <style>
            .list-item{
                padding: 12px;
            }
        </style>
        <script>
            // Función para redirigir a la página de seguimiento
            const startTracking = () => {
                window.location.href = "track.html";
            };

            const redirectToTrack = (id) => {
                window.location.href = `track.html?id=${id}`;
            };

            const loadRoutes = () => {
                const routes = JSON.parse(localStorage.getItem("routes")) || [];
                const routesList = document.getElementById("routes-list");

                if (routes.length === 0) {
                    routesList.innerHTML =
                        "<p>No hay recorridos guardados.</p>";
                } else {
                    let html = "<ul>";
                    routes.forEach((route, index) => {
                        html += `<li class='list-item'>
                          Recorrido ${index + 1}: ${route.id}
                          <button onclick="redirectToTrack(${route.id})">Ver</button>
                        </li>`;
                    });
                    html += "</ul>";
                    routesList.innerHTML = html;
                }
            };

            loadRoutes();
            document
                .getElementById("add-route-btn")
                .addEventListener("click", startTracking);
        </script>
    </body>
</html>
